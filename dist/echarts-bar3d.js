!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("echarts")):"function"==typeof define&&define.amd?define(["echarts"],e):"object"==typeof exports?exports["echarts-bar3d"]=e(require("echarts")):t["echarts-bar3d"]=e(t.echarts)}(window,(function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=5)}([function(e,r){e.exports=t},function(t,e){var r={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},n={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},a=Object.prototype.toString,i=Array.prototype,o=i.forEach,u=i.filter,h=i.slice,c=i.map,f=i.reduce,s={};function l(t){if(null==t||"object"!=typeof t)return t;var e=t,i=a.call(t);if("[object Array]"===i){e=[];for(var o=0,u=t.length;o<u;o++)e[o]=l(t[o])}else if(n[i]){var h=t.constructor;if(t.constructor.from)e=h.from(t);else{e=new h(t.length);for(o=0,u=t.length;o<u;o++)e[o]=l(t[o])}}else if(!r[i]&&!S(t)&&!M(t))for(var c in e={},t)t.hasOwnProperty(c)&&(e[c]=l(t[c]));return e}function d(t,e,r){if(!x(e)||!x(t))return r?l(e):t;for(var n in e)if(e.hasOwnProperty(n)){var a=t[n],i=e[n];!x(i)||!x(a)||b(i)||b(a)||M(i)||M(a)||w(i)||w(a)||S(i)||S(a)?!r&&n in t||(t[n]=l(e[n])):d(a,i,r)}return t}function p(t,e,r){for(var n in e)e.hasOwnProperty(n)&&(r?null!=e[n]:null==t[n])&&(t[n]=e[n]);return t}var y,g=function(){return s.createCanvas()};function m(t,e,r){if(t&&e)if(t.forEach&&t.forEach===o)t.forEach(e,r);else if(t.length===+t.length)for(var n=0,a=t.length;n<a;n++)e.call(r,t[n],n,t);else for(var i in t)t.hasOwnProperty(i)&&e.call(r,t[i],i,t)}function v(t,e){var r=h.call(arguments,2);return function(){return t.apply(e,r.concat(h.call(arguments)))}}function b(t){return"[object Array]"===a.call(t)}function x(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function w(t){return!!r[a.call(t)]}function M(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}s.createCanvas=function(){return document.createElement("canvas")};var P="__ec_primitive__";function S(t){return t[P]}function O(t){t&&m(t,(function(t,e){this.set(e,t)}),this)}O.prototype={constructor:O,get:function(t){return this["_ec_"+t]},set:function(t,e){return this["_ec_"+t]=e,e},each:function(t,e){for(var r in void 0!==e&&(t=v(t,e)),this)this.hasOwnProperty(r)&&t(this[r],r.slice(4))},removeKey:function(t){delete this["_ec_"+t]}},e.$override=function(t,e){s[t]=e},e.clone=l,e.merge=d,e.mergeAll=function(t,e){for(var r=t[0],n=1,a=t.length;n<a;n++)r=d(r,t[n],e);return r},e.extend=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},e.defaults=p,e.createCanvas=g,e.getContext=function(){return y||(y=g().getContext("2d")),y},e.indexOf=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r}return-1},e.inherits=function(t,e){var r=t.prototype;function n(){}for(var a in n.prototype=e.prototype,t.prototype=new n,r)t.prototype[a]=r[a];t.prototype.constructor=t,t.superClass=e},e.mixin=function(t,e,r){p(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,r)},e.isArrayLike=function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},e.each=m,e.map=function(t,e,r){if(t&&e){if(t.map&&t.map===c)return t.map(e,r);for(var n=[],a=0,i=t.length;a<i;a++)n.push(e.call(r,t[a],a,t));return n}},e.reduce=function(t,e,r,n){if(t&&e){if(t.reduce&&t.reduce===f)return t.reduce(e,r,n);for(var a=0,i=t.length;a<i;a++)r=e.call(n,r,t[a],a,t);return r}},e.filter=function(t,e,r){if(t&&e){if(t.filter&&t.filter===u)return t.filter(e,r);for(var n=[],a=0,i=t.length;a<i;a++)e.call(r,t[a],a,t)&&n.push(t[a]);return n}},e.find=function(t,e,r){if(t&&e)for(var n=0,a=t.length;n<a;n++)if(e.call(r,t[n],n,t))return t[n]},e.bind=v,e.curry=function(t){var e=h.call(arguments,1);return function(){return t.apply(this,e.concat(h.call(arguments)))}},e.isArray=b,e.isFunction=function(t){return"function"==typeof t},e.isString=function(t){return"[object String]"===a.call(t)},e.isObject=x,e.isBuiltInObject=w,e.isDom=M,e.eqNaN=function(t){return t!=t},e.retrieve=function(t){for(var e=0,r=arguments.length;e<r;e++)if(null!=arguments[e])return arguments[e]},e.retrieve2=function(t,e){return null!=t?t:e},e.retrieve3=function(t,e,r){return null!=t?t:null!=e?e:r},e.slice=function(){return Function.call.apply(h,arguments)},e.normalizeCssArray=function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},e.assert=function(t,e){if(!t)throw new Error(e)},e.setAsPrimitive=function(t){t[P]=!0},e.isPrimitive=S,e.createHashMap=function(t){return new O(t)},e.noop=function(){}},function(t,e,r){var n=r(1),a=r(4).parsePercent,i="__ec_stack_";function o(t){return t.get("stack")||i+t.seriesIndex}function u(t){return t.dim+t.index}function h(t,e){var r={};n.each(t,(function(t,e){var n=t.axisKey,a=t.bandWidth,i=r[n]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},o=i.stacks;r[n]=i;var u=t.stackId;o[u]||i.autoWidthCount++,o[u]=o[u]||{width:0,maxWidth:0};var h=t.barWidth;h&&!o[u].width&&(o[u].width=h,h=Math.min(i.remainedWidth,h),i.remainedWidth-=h);var c=t.barMaxWidth;c&&(o[u].maxWidth=c);var f=t.barGap;null!=f&&(i.gap=f);var s=t.barCategoryGap;null!=s&&(i.categoryGap=s)}));var i={};return n.each(r,(function(t,e){i[e]={};var r=t.stacks,o=t.bandWidth,u=a(t.categoryGap,o),h=a(t.gap,1),c=t.remainedWidth,f=t.autoWidthCount,s=(c-u)/(f+(f-1)*h);s=Math.max(s,0),n.each(r,(function(t,e){var r=t.maxWidth;r&&r<s&&(r=Math.min(r,c),t.width&&(r=Math.min(r,t.width)),c-=r,t.width=r,f--)})),s=(c-u)/(f+(f-1)*h),s=Math.max(s,0);var l,d=0;n.each(r,(function(t,e){t.width||(t.width=s),l=t,d+=t.width*(1+h)})),l&&(d-=l.width*h);var p=-d/2;n.each(r,(function(t,r){i[e][r]=i[e][r]||{offset:p,width:t.width},p+=t.width*(1+h)}))})),i}function c(t,e,r){var i=function(t,e){return h(n.map(t,(function(t){var e=t.getData(),r=t.coordinateSystem.getBaseAxis(),n=r.getExtent(),i="category"===r.type?r.getBandWidth():Math.abs(n[1]-n[0])/e.count();return{bandWidth:i,barWidth:a(t.get("barWidth"),i),barMaxWidth:a(t.get("barMaxWidth"),i),barGap:t.get("barGap"),barCategoryGap:t.get("barCategoryGap"),axisKey:u(r),stackId:o(t)}})),e)}(n.filter(e.getSeriesByType(t),(function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}))),c={},f={};e.eachSeriesByType(t,(function(t){if("cartesian2d"===t.coordinateSystem.type){var e=t.getData(),r=t.coordinateSystem,n=r.getBaseAxis(),a=o(t),h=i[u(n)][a],s=h.offset,l=h.width,d=r.getOtherAxis(n),p=t.get("barMinHeight")||0,y=n.onZero?d.toGlobalCoord(d.dataToCoord(0)):d.getGlobalExtent()[0],g=[t.coordDimToDataDim("x")[0],t.coordDimToDataDim("y")[0]],m=e.mapArray(g,(function(t,e){return r.dataToPoint([t,e])}),!0);c[a]=c[a]||[],f[a]=f[a]||[],e.setLayout({offset:s,size:l}),e.each(t.coordDimToDataDim(d.dim)[0],(function(t,r){if(!isNaN(t)){c[a][r]||(c[a][r]={p:y,n:y},f[a][r]={p:y,n:y});var n,i,o,u,h=t>=0?"p":"n",g=m[r],v=c[a][r][h],b=f[a][r][h];d.isHorizontal()?(n=v,i=g[1]+s,o=g[0]-b,u=l,f[a][r][h]+=o,Math.abs(o)<p&&(o=(o<0?-1:1)*p),c[a][r][h]+=o):(n=g[0]+s,i=v,o=l,u=g[1]-b,f[a][r][h]+=u,Math.abs(u)<p&&(u=(u<=0?-1:1)*p),c[a][r][h]+=u),e.setItemLayout(r,{x:n,y:i,width:o,height:u})}}),!0)}}),this)}c.getLayoutOnAxis=function(t,e){var r=[],a=t.axis;if("category"===a.type){for(var o=a.getBandWidth(),u=0;u<t.count;u++)r.push(n.defaults({bandWidth:o,axisKey:"axis0",stackId:i+u},t));var c=h(r,e),f=[];for(u=0;u<t.count;u++){var s=c.axis0[i+u];s.offsetCenter=s.offset+s.width/2,f.push(s)}return f}};var f=c;t.exports=f},function(t,e,r){var n=r(1);t.exports=function(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,r,a){for(var i={},o=0;o<t.length;o++){var u=t[o][1];if(!(r&&n.indexOf(r,u)>=0||a&&n.indexOf(a,u)<0)){var h=e.getShallow(u);null!=h&&(i[t[o][0]]=h)}}return i}}},function(t,e,r){var n=r(1),a=1e-4;var i=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function o(t){return Math.floor(Math.log(t)/Math.LN10)}e.linearMap=function(t,e,r,n){var a=e[1]-e[0],i=r[1]-r[0];if(0===a)return 0===i?r[0]:(r[0]+r[1])/2;if(n)if(a>0){if(t<=e[0])return r[0];if(t>=e[1])return r[1]}else{if(t>=e[0])return r[0];if(t<=e[1])return r[1]}else{if(t===e[0])return r[0];if(t===e[1])return r[1]}return(t-e[0])/a*i+r[0]},e.parsePercent=function(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?(r=t,r.replace(/^\s+/,"").replace(/\s+$/,"")).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t;var r},e.round=function(t,e,r){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),r?t:+t},e.asc=function(t){return t.sort((function(t,e){return t-e})),t},e.getPrecision=function(t){if(t=+t,isNaN(t))return 0;for(var e=1,r=0;Math.round(t*e)/e!==t;)e*=10,r++;return r},e.getPrecisionSafe=function(t){var e=t.toString(),r=e.indexOf("e");if(r>0){var n=+e.slice(r+1);return n<0?-n:0}var a=e.indexOf(".");return a<0?0:e.length-1-a},e.getPixelPrecision=function(t,e){var r=Math.log,n=Math.LN10,a=Math.floor(r(t[1]-t[0])/n),i=Math.round(r(Math.abs(e[1]-e[0]))/n),o=Math.min(Math.max(-a+i,0),20);return isFinite(o)?o:20},e.getPercentWithPrecision=function(t,e,r){if(!t[e])return 0;var a=n.reduce(t,(function(t,e){return t+(isNaN(e)?0:e)}),0);if(0===a)return 0;for(var i=Math.pow(10,r),o=n.map(t,(function(t){return(isNaN(t)?0:t)/a*i*100})),u=100*i,h=n.map(o,(function(t){return Math.floor(t)})),c=n.reduce(h,(function(t,e){return t+e}),0),f=n.map(o,(function(t,e){return t-h[e]}));c<u;){for(var s=Number.NEGATIVE_INFINITY,l=null,d=0,p=f.length;d<p;++d)f[d]>s&&(s=f[d],l=d);++h[l],f[l]=0,++c}return h[e]/i},e.MAX_SAFE_INTEGER=9007199254740991,e.remRadian=function(t){var e=2*Math.PI;return(t%e+e)%e},e.isRadianAroundZero=function(t){return t>-a&&t<a},e.parseDate=function(t){if(t instanceof Date)return t;if("string"==typeof t){var e=i.exec(t);if(!e)return new Date(NaN);if(e[8]){var r=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(r-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,r,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))},e.quantity=function(t){return Math.pow(10,o(t))},e.nice=function(t,e){var r=o(t),n=Math.pow(10,r),a=t/n;return t=(e?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10)*n,r>=-20?+t.toFixed(r<0?-r:0):t},e.reformIntervals=function(t){t.sort((function(t,e){return function t(e,r,n){return e.interval[n]<r.interval[n]||e.interval[n]===r.interval[n]&&(e.close[n]-r.close[n]==(n?-1:1)||!n&&t(e,r,1))}(t,e,0)?-1:1}));for(var e=-1/0,r=1,n=0;n<t.length;){for(var a=t[n].interval,i=t[n].close,o=0;o<2;o++)a[o]<=e&&(a[o]=e,i[o]=o?1:1-r),e=a[o],r=i[o];a[0]===a[1]&&i[0]*i[1]!=1?t.splice(n,1):n++}return t},e.isNumeric=function(t){return t-parseFloat(t)>=0}},function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),i=r(2),o=r.n(i),u=(a.a.extendSeriesModel({type:"series.bar3d",dependencies:["grid3d"],brushSelector:"rect",getInitialData:function(t,e){return a.a.helper.createList(this)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var r=e.dataToPoint(t,!0),n=this.getData(),a=n.getLayout("offset"),i=n.getLayout("size");return r[e.getBaseAxis().isHorizontal()?0:1]+=a+i/2,r}return[NaN,NaN]},defaultOption:{barType:"cube",zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,itemStyle:{normal:{},emphasis:{}}}}),{}),h=a.a.graphic,c=a.a.color;function f(t,e){"outside"===t.textPosition&&(t.textPosition=e)}u.setLabel=function(t,e,r,n,a,i,o){var u=r.getModel("label.normal"),c=r.getModel("label.emphasis");h.setLabelStyle(t,e,u,c,{labelFetcher:a,labelDataIndex:i,defaultText:a.getRawValue(i),isRectText:!0,autoColor:n}),f(t),f(e)},u.setHoverStyle=function(t,e,r){var n=a.a.util.clone(e);n.text="",h.setHoverStyle(t,{}),t.eachChild((function(t){var e;"text"!=t.name?h.setHoverStyle(t,a.a.util.defaults(n,{fill:(e=r,"string"==typeof e?c.lift(e,0):e)})):h.setHoverStyle(t,{text:"",fill:"rgba(0,0,0,0)"}),t.off("mouseover").off("mouseout").off("emphasis").off("normal")}))};var s=u,l=a.a.graphic.extendShape({type:"quadrangle",shape:{points:[],width:0,height:0},buildPath:function(t,e){var r=[[e.x,e.y],[e.x1,e.y1]],n=e.width,a=e.height;r[2]=[r[1][0]+n,r[1][1]+a],r[3]=[r[0][0]+n,r[0][1]+a],t.moveTo.apply(t,r[0]),t.lineTo.apply(t,r[1]),t.lineTo.apply(t,r[2]),t.lineTo.apply(t,r[3]),t.closePath()}}),d=a.a.graphic.extendShape({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var r=.5522848,n=e.cx,a=e.cy,i=e.rx,o=e.ry,u=i*r,h=o*r;t.moveTo(n-i,a),t.bezierCurveTo(n-i,a-h,n-u,a-o,n,a-o),t.bezierCurveTo(n+u,a-o,n+i,a-h,n+i,a),t.bezierCurveTo(n+i,a+h,n+u,a+o,n,a+o),t.bezierCurveTo(n-u,a+o,n-i,a+h,n-i,a),t.closePath()}}),p=a.a.color.parse,y=a.a.util;function g(t){var e,r=[],n=0,a=0;return y.map(t,(function(t){r.push(function(t){if(t){var e,r,n=p(t),a=n[0]/255,i=n[1]/255,o=n[2]/255,u=Math.min(a,i,o),h=Math.max(a,i,o),c=h-u,f=(h+u)/2;if(0===c)e=0,r=0;else{r=f<.5?c/(h+u):c/(2-h-u);var s=((h-a)/6+c/2)/c,l=((h-i)/6+c/2)/c,d=((h-o)/6+c/2)/c;a===h?e=d-l:i===h?e=1/3+s-d:o===h&&(e=2/3+l-s),e<0&&(e+=1),e>1&&(e-=1)}var y=[360*e,r,f];return null!=n[3]&&y.push(n[3]),y}}(t))})),y.map(r,(function(r){r[2]>n&&(e=t[a],n=r[2]),a++})),e}function m(t){var e;if(!t||!(e=t.colorStops))return t;var r=[];return y.map(e,(function(t){r.push(t.color)})),g(r)}var v=r(3),b=r.n(v)()([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","borderColor"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),x={getBarItemStyle:function(t){var e=b(this,t);if(this.getBorderLineDash){var r=this.getBorderLineDash();r&&(e.lineDash=r)}return e}},w=a.a.util,M=a.a.graphic,P=a.a.color,S=["itemStyle","normal","barBorderWidth"];function O(t,e,r,n,a,i,o){var u=new M.Group;u.isCube=!0;var h=w.extend({},n),c=N(h,a),f=new l({name:"bottom",shape:I(h,c,a)}),s=new l({name:"top",shape:C(h,c,a)}),d=new l({name:"front",isHorizontal:a,shape:j(h,c,a)}),p=new l({name:"leftFlank",shape:T(h,c,a)}),y=new l({name:"rightFlank",shape:A(h,c,a)});if(u.add(y),u.add(f),u.add(s),u.add(p),u.add(d),i){var g=s.shape,m=a?"y1":"x1";(P={})[x=a?"y":"x"]=g[x],P[m]=g[m],g[x]=f.shape[x],g[m]=f.shape[m],M[o?"updateProps":"initProps"](s,{shape:P},i,e);var v=d.shape;(P={})[x=a?"height":"width"]=v[x],v[x]=0,M[o?"updateProps":"initProps"](d,{shape:P},i,e);var b=p.shape;(P={})[x=a?"height":"width"]=b[x],b[x]=0,M[o?"updateProps":"initProps"](p,{shape:P},i,e);var x,P;b=y.shape;(P={})[x=a?"height":"width"]=b[x],b[x]=0,M[o?"updateProps":"initProps"](y,{shape:P},i,e)}return u}function N(t,e){var r=Math.PI/4,n=e?Math.floor(t.x)+.5:t.x,a=e?t.y:Math.floor(t.y)+.5,i=t.width,o=t.height,u=t.length?t.length:e?i:o,h=Math.floor(u*Math.cos(r)/2),c=Math.floor(u*Math.sin(r)/2);h=Math.floor(u*Math.cos(r)/2)+.2,c=Math.floor(u*Math.sin(r)/2)+.2;return e?[[n,a],[n+i,a],[n+i+c,a-h],[n+c,a-h],[n,a+o],[n+i,a+o],[n+i+c,a-h+o],[n+c,a-h+o]]:[[n,a+o],[n,a],[n+c,a-h],[n+c,a-h+o],[n+i,a+o],[n+i,a],[n+c+i,a-h],[n+c+i,a-h+o]]}function C(t,e,r){return r?{x:e[4][0],y:e[4][1],x1:e[7][0],y1:e[7][1],width:t.width,height:0}:{x:e[5][0],y:e[5][1],x1:e[6][0],y1:e[6][1],width:0,height:t.height}}function I(t,e,r){return r?{x:e[0][0],y:e[0][1],x1:e[3][0],y1:e[3][1],width:t.width,height:0}:{x:e[1][0],y:e[1][1],x1:e[2][0],y1:e[2][1],width:0,height:t.height}}function j(t,e,r){return r?{x:e[0][0],y:e[0][1]-.6,x1:e[1][0]+.6,y1:e[1][1]-.6,width:0,height:t.height}:{x:e[0][0]+.6,y:e[0][1],x1:e[1][0]+.6,y1:e[1][1]-.6,width:t.width,height:0}}function T(t,e,r){return r?{x:e[1][0],y:e[1][1],x1:e[2][0],y1:e[2][1],width:0,height:t.height-1}:{x:e[1][0],y:e[1][1],x1:e[2][0],y1:e[2][1],width:t.width+1,height:0}}function A(t,e,r){return r?{x:e[0][0],y:e[0][1],x1:e[3][0],y1:e[3][1],width:0,height:t.height}:{x:e[0][0],y:e[0][1],x1:e[3][0],y1:e[3][1],width:t.width,height:0}}function D(t,e){return"string"==typeof t?P.lift(t,e):t}function _(t,e){return"string"==typeof t?P.lerp(e,[t,"#000"]):t}function W(t,e,r,n,a){t&&t.useStyle(w.defaults({fill:r,opacity:a,lineJoin:"round"},e))}function k(t,e,r,n,a,i,o){var u=n.getModel("itemStyle.emphasis").getBarItemStyle(),h=e.getItemVisual(r,"color"),c=e.getItemVisual(r,"opacity"),f=n.getModel("itemStyle.normal"),l=f.getBarItemStyle(),d=m(h),p=(f.get("borderColor"),t.childOfName("rightFlank")),y=t.childOfName("bottom"),g=t.childOfName("top"),v=t.childOfName("leftFlank"),b=t.childOfName("front");W(g,l,D(d,-.2),0,c),W(y,l,D(d,-.2),0,c),W(p,l,_(h,.2),0,c),W(v,l,_(h,.2),0,c),W(b,l,h,0,c);var x=o?a.height>0?"bottom":"top":a.width>0?"left":"right";s.setLabel(b.style,u,n,h,i,r,x),s.setHoverStyle(t,u,d)}function F(t,e,r,n,a,i,o){var u=n.getModel("itemStyle.emphasis").getBarItemStyle(),h=e.getItemVisual(r,"color"),c=e.getItemVisual(r,"opacity")||1,f=n.getModel("itemStyle.normal"),l=t.childOfName("front"),d=t.childOfName("bottom"),p=t.childOfName("top"),y=t.childOfName("text"),g=m(h),v=(f.get("borderColor"),f.getBarItemStyle());W(p,v,D(g,-.2),0,c),W(d,v,D(g,-.2),0,c),W(l,v,h,0,c),y.useStyle(w.defaults({fill:"rgba(0,0,0,0)"}));var b=o?a.height>0?"bottom":"top":a.width>0?"left":"right";s.setLabel(y.style,u,n,h,i,r,b),s.setHoverStyle(t,u,g)}function E(t,e){return e?{x:t.x,y:t.y-t.width/8,width:t.width,height:t.height}:{x:t.x+t.height/8,y:t.y,width:t.width,height:t.height}}function G(t,e){return e?{cx:t.x+t.width/2,cy:t.y+t.height-t.width/8,rx:t.width/2-1,ry:t.width/8}:{cx:t.x+t.width+t.height/8,cy:t.y+t.height/2,rx:t.height/8,ry:t.height/2-1}}function B(t,e){return e?{cx:t.x+t.width/2,cy:t.y-t.width/8,rx:t.width/2-1,ry:t.width/8}:{cx:t.x+t.height/8,cy:t.y+t.height/2,rx:t.height/8,ry:t.height/2-1}}function L(t,e,r,n,a,i,o){var u=new M.Group;u.isCube=!1;var h=w.extend({},n),c=new M.Rect({name:"front",shape:E(h,a),isHorizontal:a}),f=new M.Rect({name:"text",shape:E(h,a),isHorizontal:a}),s=new d({name:"bottom",shape:B(h,a)}),l=new d({name:"top",shape:G(h,a)});if(u.add(c),u.add(s),u.add(l),u.add(f),i){var p=c.shape;(g={})[y=a?"height":"width"]=p[y],p[y]=0,M[o?"updateProps":"initProps"](c,{shape:g},i,e);var y,g,m=l.shape;(g={})[y=a?"cy":"cx"]=m[y],m[y]=s.shape[y],M[o?"updateProps":"initProps"](l,{shape:g},i,e)}return u}function H(t,e,r){(r.eachChild((function(t){t.style.text=""})),e)?r.isCube?function(t,e,r){var n=r.childOfName("rightFlank"),a=r.childOfName("bottom"),i=r.childOfName("top"),o=r.childOfName("front"),u=r.childOfName("leftFlank"),h=o.isHorizontal,c=a.shape;M.updateProps(o,{shape:h?{height:0}:{width:0}},e,t,(function(){r.parent&&r.parent.remove(r)})),M.updateProps(n,{shape:h?{height:0}:{width:0}},e,t),M.updateProps(u,{shape:h?{height:0}:{width:0}},e,t),M.updateProps(i,{shape:c},e,t)}(t,e,r):function(t,e,r,n){var a=r.childOfName("front"),i=r.childOfName("bottom"),o=r.childOfName("top"),u=(n=a.isHorizontal,i.shape);M.updateProps(a,{shape:n?{height:0}:{width:0}},e,t,(function(){r.parent&&r.parent.remove(r)})),M.updateProps(o,{shape:u},e,t,(function(){}))}(t,e,r):M.updateProps(r,{shape:{}},e,t,(function(){r.parent&&r.parent.remove(r)}))}function z(t,e,r){var n=t.getItemLayout(e),a=function(t,e){var r=t.get(S)||0;return Math.min(r,Math.abs(e.width),Math.abs(e.height))}(r,n),i=n.width>0?1:-1,o=n.height>0?1:-1;return{x:n.x+i*a/2,y:n.y+o*a/2,width:n.width-i*a,height:n.height-o*a,length:r.get("barLength")}}w.extend(a.a.Model.prototype,x);a.a.extendChartView({type:"bar3d",render:function(t,e,r){return"cartesian2d"===t.get("coordinateSystem")&&this._renderOnCartesian(t,e,r),this.group},_renderOnCartesian:function(t,e,r){var n=this.group,a=t.getData(),i=this._data,o=t.coordinateSystem.getBaseAxis().isHorizontal(),u=t.isAnimationEnabled()?t:null,h="cube"==t.get("barType");a.diff(i).add((function(e){if(a.hasValue(e)){var r=a.getItemModel(e),i=z(a,e,r),c=h?O(a,e,r,i,o,u):L(a,e,r,i,o,u);a.setItemGraphicEl(e,c),n.add(c),h?k(c,a,e,r,i,t,o):F(c,a,e,r,i,t,o)}})).update((function(e,r){var c=i.getItemGraphicEl(r);if(a.hasValue(e)){var f=a.getItemModel(e),s=z(a,e,f);c?h?function(t,e,r,n,a){var i=w.extend({},e),o=N(i,r);t.eachChild((function(t){"top"==t.name?M.updateProps(t,{shape:C(i,o,r)},n,a):"bottom"==t.name?M.updateProps(t,{shape:I(i,o,r)},n,a):"leftFlank"==t.name||"rightFlank"==t.name?M.updateProps(t,{shape:T(i,o,r)},n,a):M.updateProps(t,{shape:j(i,o,r)},n,a)}))}(c,s,o,u,e):function(t,e,r,n,a){var i=w.extend({},e);t.eachChild((function(t){"top"==t.name?M.updateProps(t,{shape:G(i,r)},n,a):"bottom"==t.name?M.updateProps(t,{shape:B(i,r)},n,a):M.updateProps(t,{shape:E(i,r)},n,a)}))}(c,s,o,u,e):c="cube"==barType?O(a,e,f,s,o,u,!0):L(a,e,f,s,o,u,!0),a.setItemGraphicEl(e,c),n.add(c),h?k(c,a,e,f,s,t,o):F(c,a,e,f,s,t,o)}else n.remove(c)})).remove((function(t){var e=i.getItemGraphicEl(t);e&&H(t,u,e)})).execute(),this._data=a},remove:function(t,e){var r=this.group,n=this._data;t.get("animation")?n&&n.eachItemGraphicEl((function(e){H(e.dataIndex,t,e)})):r.removeAll()},dispose:function(){}});a.a.registerLayout(a.a.util.curry(o.a,"bar3d")),a.a.registerVisual((function(t){t.eachSeriesByType("bar3d",(function(t){t.getData().setVisual("legendSymbol","roundRect")}))}))}])}));